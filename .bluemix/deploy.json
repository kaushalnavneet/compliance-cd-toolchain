{
  "$schema":"http://json-schema.org/draft-04/schema#",
  "messages":{
     "$i18n":"locales.yml"
  },
  "title":{
     "$ref":"#/messages/deploy.title"
  },
  "description":{
     "$ref":"#/messages/deploy.description"
  },
  "longDescription":{
     "$ref":"#/messages/deploy.longDescription"
  },
  "type":"object",
  "properties":{
     "api-key":{
        "description":{
           "$ref":"#/messages/deploy.apikeyDescription"
        },
        "type":"string",
        "pattern":"\\S",
        "validator":{
           "v-type":"api-key"
        }
     },
     "prod-region":{
        "description":{
           "$ref":"#/messages/deploy.prodRegionDescription"
        },
        "type":"string",
        "disabled":false,
        "validator":{
           "v-type":"k8s-region",
           "params":[
              "api-key"
           ]
        }
     },
     "prod-resource-group":{
        "description":{
           "$ref":"#/messages/deploy.rgDescription"
        },
        "type":"string",
        "validator":{
           "v-type":"resource-group",
           "params":[
              "api-key"
           ],
           "validator":{
              "v-type":"resource-group",
              "params":[
                 "api-key"
              ]
           }
        }
     },
     "prod-cluster-name":{
        "description":{
           "$ref":"#/messages/deploy.clusterNameDescription"
        },
        "type":"string",
        "pattern":"\\S",
        "validator":{
           "v-type":"k8s-cluster-name",
           "params":[
              "prod-resource-group",
              "prod-region"
           ]
        }
     },
     "prod-cluster-namespace":{
        "description":{
           "$ref":"#/messages/deploy.namespaceDescription"
        },
        "type":"string",
        "pattern":"^[a-z0-9]([-a-z0-9]*[a-z0-9])?$"
     },
     "source-environment":{
        "description":{
           "$ref":"#/messages/deploy.sourceEnvironmentDescription"
        },
        "type":"string",
        "pattern":"\\S"
     },
     "target-environment":{
        "description":{
           "$ref":"#/messages/deploy.targetEnvironmentDescription"
        },
        "type":"string",
        "pattern":"\\S"
     },
     "region":{
        "description":{
           "$ref":"#/messages/deploy.regionDescription"
        },
        "type":"string",
        "pattern":"\\S"
     },
     "emergency-label":{
        "description":{
           "$ref":"#/messages/deploy.emergencyLabel"
        },
        "type":"string",
        "pattern":"\\S"
     }
  },
  "required":[
     "api-key",
     "prod-region",
     "prod-resource-group",
     "prod-cluster-name",
     "prod-cluster-namespace",
     "emergency-label",
     "source-environment",
     "target-environment"
  ],
  "form":[
     {
        "type":"validator",
        "url":"/devops/validator/validator-v1.html"
     },
     {
        "type":"password",
        "readonly":false,
        "title":{
           "$ref":"#/messages/deploy.apikey"
        },
        "key":"api-key"
     },
     {
        "type":"table",
        "columnCount":7,
        "widths":[
           "24%",
           "2%",
           "24%",
           "3%",
           "23%",
           "1%",
           "23%"
        ],
        "items":[
           {
              "type":"label",
              "title":{
                 "$ref":"#/messages/region"
              }
           },
           {
              "type":"label",
              "title":""
           },
           {
              "type":"label",
              "title":{
                 "$ref":"#/messages/deploy.rg"
              }
           },
           {
              "type":"label",
              "title":""
           },
           {
              "type":"label",
              "title":{
                 "$ref":"#/messages/deploy.cluster"
              }
           },
           {
              "type":"label",
              "title":""
           },
           {
              "type":"label",
              "title":{
                 "$ref":"#/messages/deploy.clusterNs"
              }
           },
           {
              "type":"select",
              "key":"prod-region"
           },
           {
              "type":"label",
              "title":""
           },
           {
              "type":"select",
              "key":"prod-resource-group",
              "readonly":false
           },
           {
              "type":"label",
              "title":""
           },
           {
              "type":"select",
              "key":"prod-cluster-name",
              "readonly":false
           },
           {
              "type":"label",
              "title":""
           },
           {
              "type":"text",
              "key":"prod-cluster-namespace",
              "readonly":false
           }
        ]
     },
     {
        "title":{
           "$ref":"#/messages/deploy.sourceEnvironment"
        },
        "key":"source-environment",
        "type":"text",
        "readonly":false,
        "value":"master"
     },
     {
        "title":{
           "$ref":"#/messages/deploy.targetEnvironment"
        },
        "key":"target-environment",
        "type":"text",
        "readonly":false,
        "value":"prod"
     },
     {
        "title":{
           "$ref":"#/messages/deploy.region"
        },
        "key":"region",
        "type":"text",
        "readonly":false,
        "value":""
     },
     {
        "title":{
           "$ref":"#/messages/deploy.emergencyLabelTitle"
        },
        "key":"emergency-label",
        "type":"text",
        "readonly":false,
        "value":"EMERGENCY"
     },
     {
        "type":"table",
        "columnCount":1,
        "widths":[
           "100%"
        ],
        "items": [
            {
               "type": "info",
               "text": {
                  "$ref": "#/messages/deploy.clusterDescription"
               }
            },
            {
               "type": "info",
               "text": {
                  "$ref": "#/messages/deploy.clusternsDescription"
               }
            }
         ]        
     }
  ]
}
